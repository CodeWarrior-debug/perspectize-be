#!/usr/bin/env bash
# Pre-commit hook: runs gofmt on staged .go files and re-stages them.

STAGED_GO_FILES=$(git diff --cached --name-only --diff-filter=ACM -- '*.go')

if [ -z "$STAGED_GO_FILES" ]; then
    exit 0
fi

# Format each staged Go file and re-stage it
for file in $STAGED_GO_FILES; do
    if [ -f "$file" ]; then
        gofmt -w "$file"
        git add "$file"
    fi
done
