---
phase: 02.1-mobile-responsive-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - fe/src/lib/components/Header.svelte
  - fe/src/app.css
  - fe/tests/components/Header.test.ts
autonomous: true

must_haves:
  truths:
    - "Header fits at 375px with logo, user selector, and Add Video button all visible without clipping or horizontal overflow"
    - "AG Grid pagination bar wraps cleanly at 375px instead of overflowing"
    - "Sticky header does not clip content on scroll at 375px"
  artifacts:
    - path: "fe/src/lib/components/Header.svelte"
      provides: "Responsive header with min-w-0 truncation and shrink-0 on interactive elements"
      contains: "min-w-0"
    - path: "fe/src/app.css"
      provides: "AG Grid pagination panel mobile CSS override"
      contains: "ag-paging-panel"
    - path: "fe/tests/components/Header.test.ts"
      provides: "Updated tests verifying responsive CSS classes"
      min_lines: 50
  key_links:
    - from: "fe/src/lib/components/Header.svelte"
      to: "Tailwind responsive utilities"
      via: "min-w-0, truncate, shrink-0, responsive gap/text classes"
      pattern: "min-w-0.*truncate"
    - from: "fe/src/app.css"
      to: "AG Grid pagination panel"
      via: "CSS class override"
      pattern: "\\.ag-paging-panel"
---

<objective>
Fix header overflow (BUG-001/BUG-003) and AG Grid pagination bar (BUG-002) at 375px viewport width.

Purpose: The header currently overflows at iPhone SE width (375px) because flexbox children don't shrink below content size (default min-width: auto). The AG Grid pagination bar also breaks at narrow widths. These are P1 issues blocking mobile usability.

Output: Responsive header that fits at 375px with truncating logo text and non-shrinking interactive elements, plus AG Grid pagination CSS override that wraps controls instead of overflowing.
</objective>

<execution_context>
@/Users/jamesjordan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jamesjordan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02.1-mobile-responsive-fixes/02.1-RESEARCH.md
@fe/src/lib/components/Header.svelte
@fe/src/lib/components/UserSelector.svelte
@fe/src/app.css
@fe/tests/components/Header.test.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix header overflow and pagination CSS</name>
  <files>
    fe/src/lib/components/Header.svelte
    fe/src/app.css
  </files>
  <action>
**Header.svelte changes (BUG-001 + BUG-003):**

Update the inner flex container to add responsive gap:
- Change `class="h-full px-4 md:px-6 lg:px-8 max-w-screen-xl mx-auto flex items-center justify-between"` to add `gap-2 md:gap-4`

Update the logo anchor:
- Change `class="font-bold text-xl text-foreground hover:text-primary transition-colors"` to `class="font-bold text-base sm:text-lg md:text-xl text-foreground hover:text-primary transition-colors min-w-0 truncate"`
- `min-w-0` overrides flexbox default min-width: auto, allowing the logo to shrink
- `truncate` adds text-overflow: ellipsis when the logo needs to truncate
- `text-base sm:text-lg md:text-xl` scales font size responsively (16px -> 18px -> 20px)

Update the right-side flex container:
- Change `class="flex items-center gap-4"` to `class="flex items-center gap-2 md:gap-4 shrink-0"`
- `shrink-0` prevents the interactive elements from shrinking below their minimum usable size
- `gap-2 md:gap-4` reduces spacing at mobile

Update the Button:
- Add `size="sm"` prop for smaller button at all sizes
- Optionally, if button text is too wide at 375px, the `shrink-0` on parent prevents crushing

**app.css changes (BUG-002):**

Add AG Grid pagination panel CSS override after the existing `@theme` block:

```css
/* AG Grid pagination mobile responsive fix (GitHub issue #9239) */
.ag-paging-panel {
  height: auto !important;
  flex-wrap: wrap-reverse;
  row-gap: 1rem;
  padding: 0.25rem;
  align-items: center;
  justify-content: flex-end;
}

@media (max-width: 768px) {
  .ag-paging-panel {
    justify-content: center;
  }
}

@media (max-width: 375px) {
  .ag-paging-panel {
    font-size: 0.875rem;
  }
}
```

This makes the pagination bar use auto height and wrap controls on narrow viewports instead of overflowing.
  </action>
  <verify>
Run `pnpm run check` from fe/ to ensure no TypeScript errors.
Run `grep -q "min-w-0" perspective-fe/src/lib/components/Header.svelte` to confirm responsive class added.
Run `grep -q "ag-paging-panel" fe/src/app.css` to confirm pagination CSS added.
  </verify>
  <done>
Header.svelte has min-w-0 + truncate on logo, shrink-0 on right container, responsive gap and text sizing. app.css has AG Grid pagination panel CSS override with flex-wrap and height: auto.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Header tests for responsive classes</name>
  <files>
    fe/tests/components/Header.test.ts
  </files>
  <action>
Update the existing Header test file to verify the new responsive CSS classes:

1. Update the existing test `'has responsive padding classes on inner container'` to also check for `gap-2` (responsive gap)

2. Add a new test: `'logo has min-w-0 for flex shrink support'` that checks the anchor element's className contains `min-w-0`

3. Add a new test: `'logo has truncate class for text overflow'` that checks the anchor element's className contains `truncate`

4. Add a new test: `'right container has shrink-0 to prevent interactive element shrinking'` — find the div containing the button and check it has `shrink-0`

5. Add a new test: `'logo has responsive text sizing'` — check the anchor element's className contains `text-base` (mobile-first size)

Use the existing `renderHeader()` helper pattern. For finding the right-side container, query by the button's parent element or by the second div inside the inner container.
  </action>
  <verify>
Run `cd fe && pnpm run test:run` — all Header tests pass (existing 9 + new 4 = 13 tests).
  </verify>
  <done>
Header.test.ts has 13 passing tests including verification of min-w-0, truncate, shrink-0, responsive text sizing, and responsive gap on inner container.
  </done>
</task>

</tasks>

<verification>
1. `cd fe && pnpm run check` — no TypeScript errors
2. `cd fe && pnpm run test:run` — all tests pass including updated Header tests
3. `grep -q "min-w-0" fe/src/lib/components/Header.svelte && echo "PASS"` — responsive flex fix present
4. `grep -q "ag-paging-panel" fe/src/app.css && echo "PASS"` — pagination CSS override present
5. `grep -q "shrink-0" fe/src/lib/components/Header.svelte && echo "PASS"` — interactive element protection present
</verification>

<success_criteria>
- Header.svelte uses min-w-0 + truncate on logo, shrink-0 on interactive container, responsive gap and text sizing
- app.css contains AG Grid pagination panel CSS override with flex-wrap: wrap-reverse and height: auto
- All existing and new Header tests pass
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/02.1-mobile-responsive-fixes/02.1-01-SUMMARY.md`
</output>
