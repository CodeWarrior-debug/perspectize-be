---
phase: 03.1-design-token-system
plan: 02
type: execute
wave: 2
depends_on: ["01"]
files_modified:
  - frontend/src/lib/components/ActivityTable.svelte
autonomous: false

must_haves:
  truths:
    - "AG Grid header row has navy background (#1a365d) with white text"
    - "AG Grid uses Geist font instead of Inter"
    - "AG Grid has alternating row tints using a subtle navy shade"
    - "AG Grid pagination area has branded styling"
    - "Existing components (Dialog, Header, shadcn buttons) render correctly with the new tokens — no visual regressions"
  artifacts:
    - path: "frontend/src/lib/components/ActivityTable.svelte"
      provides: "AG Grid themed with design tokens"
      contains: "themeQuartz.withParams"
  key_links:
    - from: "frontend/src/lib/components/ActivityTable.svelte"
      to: "frontend/src/app.css"
      via: "AG Grid themeQuartz uses same hex colors as CSS tokens"
      pattern: "#1a365d|#ffffff|#f7fafc"
---

<objective>
Update AG Grid's theme configuration to use the new design token colors (navy header, white header text, alternating row tints, Geist font) and visually verify the complete token system works across all components.

Purpose: AG Grid currently uses bare themeQuartz with Inter font and no brand colors. This plan makes the grid match the design system established in Plan 01. The visual checkpoint confirms the entire token system (Dialog, Header, buttons, grid) renders correctly.

Output: Updated ActivityTable.svelte with branded AG Grid theme, visual verification of full token system.
</objective>

<execution_context>
@/Users/jamesjordan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jamesjordan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03.1-dialog-ux-polish/03.1-CONTEXT.md
@.planning/phases/03.1-dialog-ux-polish/03.1-01-SUMMARY.md
@frontend/docs/DESIGN_SPEC.md
@frontend/src/lib/components/ActivityTable.svelte
@frontend/src/app.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update AG Grid theme with design token colors</name>
  <files>frontend/src/lib/components/ActivityTable.svelte</files>
  <action>
Update the `themeQuartz.withParams()` call in `frontend/src/lib/components/ActivityTable.svelte` to apply the design system colors. The current configuration is:

```ts
const theme = themeQuartz.withParams({
    fontFamily: 'Inter, sans-serif',
    fontSize: 14,
});
```

Replace with branded theme parameters. Use AG Grid's theming API (`themeQuartz.withParams()`) with these design token values:

```ts
const theme = themeQuartz.withParams({
    fontFamily: "'Geist', system-ui, sans-serif",
    fontSize: 14,
    headerBackgroundColor: '#1a365d',
    headerTextColor: '#ffffff',
    headerFontWeight: 600,
    oddRowBackgroundColor: '#ffffff',
    evenRowBackgroundColor: '#f7fafc',
    rowHoverColor: 'rgba(26, 54, 93, 0.06)',
    borderColor: '#d4d4d4',
    accentColor: '#1a365d',
    foregroundColor: '#171717',
    backgroundColor: '#ffffff',
    selectedRowBackgroundColor: 'rgba(26, 54, 93, 0.08)',
    columnHoverColor: 'rgba(26, 54, 93, 0.04)',
    headerColumnResizeHandleColor: 'rgba(255, 255, 255, 0.5)',
});
```

**Important notes:**
- Font changed from `Inter, sans-serif` to `'Geist', system-ui, sans-serif` (per CONTEXT decision)
- Navy header (#1a365d) with white text (#ffffff) — the biggest visual improvement
- Alternating rows: white + accent (#f7fafc) — very subtle tint
- Row hover: 6% navy as specified in DESIGN_SPEC.md
- All color values are hex, matching the token system in app.css
- Do NOT change any other part of ActivityTable.svelte (column defs, row data handling, pagination config, Quick Filter, etc.)
- The AG Grid themeQuartz API may not support all of these parameters — check the AG Grid v32 theming docs. If a parameter is not supported, omit it (the grid will use its defaults). The critical parameters are: fontFamily, headerBackgroundColor, headerTextColor, oddRowBackgroundColor, evenRowBackgroundColor, borderColor, accentColor.
  </action>
  <verify>
1. Run `pnpm run build` from `frontend/` — must succeed
2. Run `pnpm run check` from `frontend/` — must succeed
3. Run `pnpm run test:run` from `frontend/` — all tests pass (ActivityTable tests still pass)
4. Verify the theme uses Geist: `grep "Geist" frontend/src/lib/components/ActivityTable.svelte`
5. Verify navy header color: `grep "1a365d" frontend/src/lib/components/ActivityTable.svelte`
  </verify>
  <done>
AG Grid theme updated with navy header, white header text, Geist font, alternating row tints, and branded accent color. Build, type-check, and tests pass.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete design token system: 27 color tokens in app.css, Charter serif font loaded, AG Grid themed with navy header and alternating rows. This affects every component: Dialog (should now have solid white background), Header, buttons, input borders, and the data grid.
  </what-built>
  <how-to-verify>
1. Start dev server: `cd fe && pnpm run dev`
2. Open http://localhost:5173 in browser

**Check the Activity page (desktop):**
- AG Grid header row should be navy (#1a365d) with white text
- Grid rows should alternate white / very light blue (#f7fafc)
- Search input should have visible border (#d4d4d4)
- "Activity" heading and "Recently updated content" should render in correct text color
- Header buttons (Add Video) should be navy with white text

**Check the Add Video dialog:**
- Click "Add Video" button
- Dialog should have SOLID WHITE background (not transparent/see-through)
- Dialog overlay should be semi-transparent black (table dimmed behind it)
- Input field should have visible border
- Cancel button should have border (outline variant)
- Add Video button should be navy
- Close (X) button should be visible

**Check mobile (resize to 375px or use DevTools):**
- Everything should still be readable and functional
- No layout breakage from the new tokens

**Check font-serif availability:**
- Open DevTools, in console type: `document.fonts.check('400 16px Charter')` — should return `true` after page load (may need to wait for font to load)
- In Elements panel, add `class="font-serif"` to a text element — text should visibly change to Charter (serif font with distinct letterforms vs Geist sans-serif). This confirms the dual-font system works end-to-end.
  </how-to-verify>
  <resume-signal>Type "approved" or describe any visual issues that need fixing.</resume-signal>
</task>

</tasks>

<verification>
1. `pnpm run build` succeeds
2. `pnpm run check` succeeds
3. `pnpm run test:run` — all tests pass
4. Visual verification: Dialog has solid white bg, AG Grid has navy header, buttons are navy, borders visible
5. Charter font loads (DevTools network tab shows Charter woff2 requests, or `document.fonts.check`)
</verification>

<success_criteria>
- AG Grid header is navy with white text
- AG Grid rows alternate white/accent
- AG Grid uses Geist font (not Inter)
- Dialog background is solid white (the critical fix)
- All shadcn components consume the new tokens correctly
- Charter font is available via font-serif class
- No visual regressions on mobile (375px)
- Build, type-check, and tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-dialog-ux-polish/03.1-02-SUMMARY.md`
</output>
