# Phase 3.2: Activity Page Beta Quality - Context

**Gathered:** 2026-02-09
**Status:** Ready for planning

<domain>
## Phase Boundary

Get every element on the Activity page — table, header, layout, dialog — to beta quality. This phase rebuilds the Activity page on top of the design token system established in Phase 3.1. Source-data columns only (YouTube metadata). User-data columns (perspectives, user labels) are Phase 4+.

**Depends on:** Phase 3.1 (Design Token System) — all Figma tokens must be implemented in code first.

</domain>

<decisions>
## Implementation Decisions

### Table Data Operations
- **Server-side sorting by default** — Column header clicks send sort params to the GraphQL API. Backend returns pre-sorted data. No client-side sorting in this phase.
- **Per-column filters only** — Remove the global search bar entirely. Each column header gets its own filter (AG Grid floating filters or header filter menus).
- **Server-side pagination** — Only load one page at a time from backend. Show total count if available from backend. Keep page size selector (10/25/50).
- **User selector stays** — No functionality changes. Remains in header as-is.

### Table Columns (Source Data Only)
- **Default visible columns (6):**
  1. Item (Title + small thumbnail) — hover shows full title text and full thumbnail
  2. Type (show YouTube icon, not text)
  3. Length (duration) — hover shows unit of measure
  4. # Views (YouTube view count)
  5. # Likes (YouTube like count)
  6. Date (YouTube publish date, NOT Perspectize database date)
- **Available via column chooser (hidden by default):**
  - Channel name (source)
  - Date Added to Perspectize (database createdAt)
  - Date Updated in Perspectize (database updatedAt)
  - YouTube Tags/Labels
  - Description preview
- **Column management:** Right-click column header menu to show/hide columns. Make discoverability obvious to users.
- **New YouTube columns require backend work** — View count, like count, channel name, YouTube publish date, and tags need to be exposed through GraphQL. The raw YouTube API response data exists in the database but fields are not yet surfaced.

### Table Presentation
- **Compact rows** matching Figma reference (see Figma node 3:409 in "Perspectize Youtube - Design 1"). Small thumbnails (~32-40px), ~40-48px row height.
- **Sticky page header + sticky table header** — Both the app header and AG Grid column headers stay fixed when scrolling. Table body scrolls independently.
- **Empty state:** "No items yet - add the first one!" displayed in the table body area (where loading currently shows). No graphic/illustration.
- **Loading state:** Keep existing AG Grid loading overlay as-is.

### Data Provenance Model (Foundation)
Three-tier provenance to be visually established in this phase (even though only tier 1 is present):
1. **Source data** (YouTube API) — immutable, factual, read-only
2. **Other users' data** (other Perspectize users) — visible but not editable by current user
3. **Current user's data** — fully editable

For this phase: source data columns only. But visual infrastructure gets established:
- Columns grouped by source (source data on left, user data on right when added later)
- Tooltip on column header hover explaining what the data source is
- Visual indicators distinguishing provenance tiers
- Per-column provenance display decisions deferred to Phase 4 discussion (user requested case-by-case column discussion)

### Page Layout
- **Keep "Activity" heading** — Remove the subtitle ("Recently updated content"). Add column chooser button near the heading or as a toolbar element.
- **Header:** Logo (left) + User Selector (unchanged) + Add Video button (right). No changes to header functionality.
- **Table dominates the page** — Maximize table real estate after heading.
- **Mobile behavior:** Acceptable as-is. No mobile layout changes in this phase.

### Dialog (Add Video) Redesign
- **No overlay at all** — Dialog floats on the page with a shadow. No darkening of the background.
- **Page stays interactive** — User can still interact with the table/page while dialog is open.
- **Popover-near-button pattern** — Dialog appears near the Add Video button (not centered modal). Doesn't jerk user to a new screen context.
- **Prevent browser autofill** — URL input should not suggest previously pasted URLs (autocomplete="off" or similar).
- **Content stays simple** — YouTube URL input + Submit/Cancel buttons. No changes to form content.
- **Toast feedback** — Keep existing toast behavior (top-right, 2s auto-dismiss). Verify still working.
- **Reusable pattern** — Same popover-near-trigger pattern will be used for Phase 4 Add Perspective (but triggered from a table column, not a header button).

### Claude's Discretion
- Spacing/padding adjustments to match the design token system from Phase 3.1
- Click-outside dismiss behavior for the popover dialog
- Exact row height fine-tuning (reference: Figma compact rows at node 3:409)
- Column chooser button placement and styling
- Filter type per column (text input, dropdown, date picker — based on column data type)
- How to make right-click column management discoverable to users

</decisions>

<specifics>
## Specific Ideas

- Row height/style reference: Figma "Perspectize Youtube - Design 1" node 3:409 — compact rows with small thumbnails, clean alignment
- "I want to be able to interact with the page still" when dialog is open — this rules out modal/overlay patterns
- "Close to where the button was pressed, don't distract/overwhelm by jerking user into new screen" — popover, not modal
- "I do not want my prior pasted videos autofill suggesting" — prevent browser autocomplete
- "No items yet - add the first one!" — empty state text, no graphic, shown in table body
- User explicitly wants every future user-data column's provenance display discussed individually (Phase 4+)

</specifics>

<deferred>
## Deferred Ideas

- **Adaptable library** — Full column management, layouts, user state persistence. Evaluate as its own phase.
- **Filter chips** — Replace per-column filters with chip-based filter UI. Future enhancement.
- **User-configurable page size input** — Let user type their own page size number instead of just 10/25/50 dropdown.
- **"Data on page only" toggle** — Switch between server-side and client-side sort/filter for loaded data.
- **Summary footer bar** — Total Videos, Total Perspectives, Avg Quality Score, Avg Agreement Score (from Figma reference).
- **Add Perspective from table column** — Phase 4 will use same popover pattern but triggered from a table column cell.
- **Per-column provenance decisions** — Each user-data column's provenance display to be discussed individually when Phase 4 adds them.

</deferred>

---

*Phase: 03.2-activity-page-beta-quality*
*Context gathered: 2026-02-09*
