---
phase: 03.3-repository-rename-folder-restructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - backend/go.mod
  - backend/gqlgen.yml
  - perspective-go/internal/**/*.go
  - backend/pkg/**/*.go
  - backend/cmd/**/*.go
  - backend/test/**/*.go
autonomous: false

must_haves:
  truths:
    - "GitHub repository is accessible at github.com/CodeWarrior-debug/perspectize"
    - "Local git remote points to new repository URL"
    - "Go module path is github.com/CodeWarrior-debug/perspectize/backend"
    - "All Go import statements reference the new module path"
    - "gqlgen.yml model bindings reference the new module path"
    - "All 78 Go tests pass with new module path"
  artifacts:
    - path: "backend/go.mod"
      provides: "Updated module declaration"
      contains: "github.com/CodeWarrior-debug/perspectize/backend"
    - path: "backend/gqlgen.yml"
      provides: "Updated model bindings"
      contains: "github.com/CodeWarrior-debug/perspectize/backend"
  key_links:
    - from: "backend/**/*.go"
      to: "backend/go.mod"
      via: "import path matching module declaration"
      pattern: "github.com/CodeWarrior-debug/perspectize/backend"
    - from: "backend/gqlgen.yml"
      to: "backend/internal/core/domain"
      via: "model bindings referencing domain types"
      pattern: "github.com/CodeWarrior-debug/perspectize/backend/internal/core/domain"
---

<objective>
Rename the GitHub repository from perspectize to perspectize, update the local git remote, and refactor all Go module paths from `github.com/CodeWarrior-debug/perspectize/backend` to `github.com/CodeWarrior-debug/perspectize/backend`.

Purpose: The repository name `perspectize` is a legacy artifact from when the backend was the only concern. The project is now a monorepo with frontend and backend. Renaming to `perspectize` with `backend/` and `fe/` folders better reflects the project structure. Go module paths must be updated BEFORE folder rename (research anti-pattern: don't rename folders before updating Go imports).

Output: Working Go module with new import paths, all tests passing, gqlgen model bindings updated.
</objective>

<execution_context>
@/Users/jamesjordan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jamesjordan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03.3-repository-rename-folder-restructure/03.3-RESEARCH.md
@backend/go.mod
@backend/gqlgen.yml
@backend/CLAUDE.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Rename GitHub Repository</name>
  <action>
    The GitHub repository must be renamed from `perspectize` to `perspectize`.
    This can ONLY be done via the GitHub web UI (not API, not CLI).
  </action>
  <how-to-do-it>
    1. Navigate to https://github.com/CodeWarrior-debug/perspectize/settings
    2. Scroll to "Rename repository" section under "General"
    3. Enter new name: `perspectize`
    4. Click "Rename" and confirm
    5. GitHub will create automatic redirects from the old URL
  </how-to-do-it>
  <resume-signal>Type "renamed" once the GitHub repository has been renamed to perspectize</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Update Local Remote and Refactor Go Module Path</name>
  <files>
    backend/go.mod
    backend/gqlgen.yml
    backend/internal/**/*.go
    backend/pkg/**/*.go
    backend/cmd/**/*.go
    backend/test/**/*.go
  </files>
  <action>
    **Step 1: Update local git remote URL**
    ```bash
    git remote set-url origin https://github.com/CodeWarrior-debug/perspectize.git
    ```
    Verify with `git remote -v` (should show new URL) and `git fetch` (should succeed).

    **Step 2: Update go.mod module path**
    ```bash
    cd backend
    go mod edit -module github.com/CodeWarrior-debug/perspectize/backend
    ```

    **Step 3: Bulk update all Go import statements**
    Replace `github.com/CodeWarrior-debug/perspectize/backend` with `github.com/CodeWarrior-debug/perspectize/backend` in ALL .go files:
    ```bash
    find backend/ -name "*.go" -type f -exec sed -i '' \
      's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' {} +
    ```

    **Step 4: Update gqlgen.yml model bindings**
    The gqlgen.yml contains full import paths for IntID, SortOrder, ContentSortBy, PerspectiveSortBy, Privacy, ContentType, ReviewStatus. All must be updated:
    ```bash
    sed -i '' 's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' \
      backend/gqlgen.yml
    ```

    **Step 5: Tidy Go module**
    ```bash
    cd backend && go mod tidy
    ```

    **Step 6: Run all tests**
    ```bash
    cd backend && make test
    ```
    All 78 tests must pass.

    **IMPORTANT: Do NOT rename any folders in this task.** Folders stay as `backend/` and `fe/`. Folder rename happens in Plan 02 after Go module refactoring is verified.

    **IMPORTANT: Do NOT update the backend/CLAUDE.md gqlgen.yml example bindings yet.** That file will be updated as part of the bulk path replacement in Plan 02 (which covers all CLAUDE.md files, docs, and planning files).
  </action>
  <verify>
    1. `git remote -v` shows `https://github.com/CodeWarrior-debug/perspectize.git`
    2. `git fetch` succeeds without error
    3. `head -1 backend/go.mod` shows `module github.com/CodeWarrior-debug/perspectize/backend`
    4. `grep -r "perspectize/backend" backend/ --include="*.go" --include="*.yml"` returns zero results
    5. `grep "perspectize/backend" backend/gqlgen.yml` returns model binding lines
    6. `grep "perspectize/backend" perspective-go/gqlgen.yml` returns zero results (no old paths remain)
    7. `cd backend && make test` exits 0 with all tests passing
  </verify>
  <done>
    - Local remote points to github.com/CodeWarrior-debug/perspectize.git
    - Go module path is github.com/CodeWarrior-debug/perspectize/backend
    - All Go imports updated (zero references to old path in .go and .yml files)
    - gqlgen.yml model bindings point to new module path
    - All Go tests pass
  </done>
</task>

</tasks>

<verification>
- `git remote -v` shows perspectize.git URL
- No Go source files contain old module path: `grep -r "perspectize/backend" backend/`
- Tests pass: `cd backend && make test`
- go.mod module declaration: `github.com/CodeWarrior-debug/perspectize/backend`
</verification>

<success_criteria>
1. GitHub repository renamed to perspectize (verified by `git fetch` to new URL)
2. All Go import paths updated to github.com/CodeWarrior-debug/perspectize/backend
3. gqlgen.yml model bindings updated
4. All 78 Go tests pass with new module path
5. No references to old module path remain in Go source or gqlgen.yml
</success_criteria>

<output>
After completion, create `.planning/phases/03.3-repository-rename-folder-restructure/03.3-01-SUMMARY.md`
</output>
