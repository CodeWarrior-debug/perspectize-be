# Phase 3.3: Repository Rename & Folder Restructure - Research

**Researched:** 2026-02-13
**Domain:** Repository/monorepo restructuring, Go module path refactoring, GitHub repository management
**Confidence:** HIGH

## Summary

Phase 3.3 involves renaming the GitHub repository from `perspectize` to `perspectize` and restructuring the monorepo folder layout (`backend/` → `backend/`, `frontend/` → `frontend/`). This is primarily an infrastructure refactoring with significant impacts on Go import paths, CI/CD configurations, documentation, and deployment configurations.

The repository currently has:
- **40 Go files** with the module path `github.com/CodeWarrior-debug/perspectize/backend`
- **78 files** containing import statements with the old module path
- **117 occurrences** of `perspectize` across 52 files
- **65 files** referencing `backend/` path
- **58 files** referencing `frontend/` path

GitHub provides automatic redirects for renamed repositories indefinitely (unless a new repo is created with the old name), so existing clones will continue to work. However, Go module imports require explicit refactoring because import paths are hardcoded strings in source code.

**Key findings:**
- GitHub auto-redirects old repository URLs to new ones indefinitely
- Local clones continue working via redirects but should be updated manually
- Go module path refactoring requires updating `go.mod` + all import statements in Go files
- CI/CD workflows reference folder paths in `working-directory` and cache settings
- Sevalla/DigitalOcean deployment uses folder-scoped configuration (Source Directory)
- Planning docs contain numerous path references that need bulk updating
- Modern tooling (gopls, find+sed) can automate most of the refactoring

**Primary recommendation:** Execute in 3 stages: (1) GitHub repo rename + local remote update, (2) Go module path refactor using find+sed, (3) folder rename with bulk path updates across documentation and configs.

## Standard Stack

### Core Tools
| Tool | Version | Purpose | Why Standard |
|------|---------|---------|--------------|
| GitHub CLI (`gh`) | Latest | Repository management | Official CLI, handles auth, required per CLAUDE.md |
| find + sed | Built-in | Bulk file updates | POSIX standard, reliable for text replacement |
| git | 2.x | Version control | Track all changes, atomic commits |
| gopls | Latest | Go refactoring (optional) | Modern LSP-based tool, recommended by Go team |

### Supporting
| Tool | Version | Purpose | When to Use |
|------|---------|---------|-------------|
| go mod edit | Built-in | go.mod updates | Safer than manual editing |
| GitHub web UI | N/A | Repository rename | Simple, no CLI alternative for rename |
| VSCode Find/Replace | N/A | Visual verification | Spot-check automated replacements |

### Alternatives Considered
| Instead of | Could Use | Tradeoff |
|------------|-----------|----------|
| find + sed | gopls rename | gopls is module-aware but overkill for simple text replacement |
| Bulk sed | Manual editing | Error-prone, doesn't scale (117 occurrences) |
| Single commit | Per-subsystem commits | Harder to review, but simpler rollback |

**Installation:**
No additional dependencies needed. All tools are either built-in or already in use (gh CLI per CLAUDE.md).

## Architecture Patterns

### Current Structure
```
perspectize/                          # GitHub repo name
├── backend/                       # Backend folder
│   ├── go.mod                           # module github.com/.../perspectize/backend
│   ├── internal/
│   │   ├── core/domain/*.go             # Import: github.com/.../perspectize/backend/internal/core/domain
│   │   └── ...
│   └── pkg/
├── frontend/                       # Frontend folder
│   ├── package.json                     # name: "fe"
│   └── ...
├── .github/workflows/
│   ├── ci.yml                           # working-directory: backend
│   └── frontend-test.yml                # cache-dependency-path: frontend/pnpm-lock.yaml
├── docs/*.md                            # References to backend/, frontend/
└── .planning/                           # 69 planning docs with path references
```

### Target Structure
```
perspectize/                             # Renamed GitHub repo
├── backend/                              # Renamed from backend/
│   ├── go.mod                           # module github.com/.../perspectize/backend
│   ├── internal/
│   │   ├── core/domain/*.go             # Import: github.com/.../perspectize/backend/internal/core/domain
│   │   └── ...
│   └── pkg/
├── frontend/                                   # Renamed from frontend/
│   ├── package.json                     # name: "fe" (unchanged, npm package name)
│   └── ...
├── .github/workflows/
│   ├── ci.yml                           # working-directory: backend
│   └── frontend-test.yml                # cache-dependency-path: frontend/pnpm-lock.yaml
├── docs/*.md                            # Updated to backend/, frontend/
└── .planning/                           # Bulk-updated path references
```

## Refactoring Patterns

### Pattern 1: GitHub Repository Rename

**What:** Rename repository on GitHub via web UI (Settings → General → Rename repository)

**When to use:** First step before any code changes, establishes new canonical URL

**Steps:**
1. Navigate to https://github.com/CodeWarrior-debug/perspectize/settings
2. Scroll to "Rename repository" section
3. Enter new name: `perspectize`
4. Confirm rename (warns about redirects, breaking Actions)

**Effects:**
- GitHub creates automatic redirects from old URL → new URL
- Redirects are permanent unless a new repo is created with old name
- Existing clones continue working via redirects
- **GitHub Actions referencing renamed repos FAIL** (not applicable here, no external action references)

**Local update (REQUIRED for clarity):**
```bash
git remote set-url origin https://github.com/CodeWarrior-debug/perspectize.git
```

**Verification:**
```bash
git remote -v  # Should show new URL
git fetch      # Should work without error
```

**Sources:**
- [GitHub: Renaming a repository](https://docs.github.com/en/repositories/creating-and-managing-repositories/renaming-a-repository) - Official documentation

### Pattern 2: Go Module Path Refactoring

**What:** Update Go module path and all import statements across the codebase

**When to use:** After repository rename, before folder rename (ensures working state between steps)

**Critical requirement:** Go import paths are hardcoded strings in source code. No automatic tooling exists that handles repository rename + folder rename simultaneously. Must update module path first, verify tests pass, then rename folders.

**Steps:**

**2.1: Update go.mod**
```bash
cd backend/
go mod edit -module github.com/CodeWarrior-debug/perspectize/backend
```

**2.2: Update all import statements (bulk sed)**
```bash
# From repository root
find backend/ -name "*.go" -type f -exec sed -i '' \
  's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' {} +
```

**2.3: Update gqlgen.yml model bindings**
```bash
# gqlgen.yml contains full import paths in model bindings
sed -i '' 's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' \
  backend/gqlgen.yml
```

**2.4: Verify tests**
```bash
cd backend/
go mod tidy
go test ./...
```

**Why this order:** Changing module path BEFORE renaming folders means:
- `backend/` folder still exists (matches working directory expectations)
- Import paths point to new module path (future-proof)
- Tests verify refactoring worked
- Folder rename becomes a simple `mv` operation

**Alternative approach (NOT recommended):** Use gopls rename. While gopls is module-aware and recommended by Go team for symbol renaming, it doesn't handle repository-level path changes well. The `find + sed` approach is more straightforward for bulk text replacement.

**Sources:**
- [JetBrains Guide: Rename Go Module](https://www.jetbrains.com/guide/go/tips/rename-go-module-name/) - IDE-based approach
- [Applied Go: Rename or Relocate a Public Go Module](https://appliedgo.net/spotlight/rename-or-relocate-a-public-go-module/) - Philosophy (copy, don't move) for public modules

### Pattern 3: Folder Rename with Bulk Path Updates

**What:** Rename `backend/` → `backend/` and `frontend/` → `frontend/`, then update all references across configs, docs, and planning files

**When to use:** After Go module refactoring is complete and verified

**Steps:**

**3.1: Rename folders**
```bash
git mv backend backend
git mv fe fe
```

**3.2: Update CI/CD workflows**
```bash
# .github/workflows/ci.yml
sed -i '' 's/backend/backend/g' .github/workflows/ci.yml

# .github/workflows/frontend-test.yml
sed -i '' 's/frontend/frontend/g' .github/workflows/frontend-test.yml
```

**3.3: Update root CLAUDE.md**
```bash
sed -i '' 's/backend/backend/g' CLAUDE.md
sed -i '' 's/frontend/frontend/g' CLAUDE.md
```

**3.4: Update package-level CLAUDE.md files**
```bash
sed -i '' 's/backend/backend/g' backend/CLAUDE.md
sed -i '' 's/frontend/frontend/g' frontend/CLAUDE.md
```

**3.5: Update docs/ directory (8 markdown files)**
```bash
find docs/ -name "*.md" -type f -exec sed -i '' 's/backend/backend/g' {} +
find docs/ -name "*.md" -type f -exec sed -i '' 's/frontend/frontend/g' {} +
```

**3.6: Update .planning/ directory (69 markdown files)**
```bash
find .planning/ -name "*.md" -type f -exec sed -i '' 's/backend/backend/g' {} +
find .planning/ -name "*.md" -type f -exec sed -i '' 's/frontend/frontend/g' {} +
```

**3.7: Update .gitignore (if folder-specific rules exist)**
```bash
# Check first
grep "backend\|fe" .gitignore

# Update if needed
sed -i '' 's/backend/backend/g' .gitignore
sed -i '' 's/frontend/frontend/g' .gitignore
```

**3.8: Update any remaining references**
```bash
# Search for remaining references
grep -r "backend" . --exclude-dir=node_modules --exclude-dir=.git
grep -r "fe" . --exclude-dir=node_modules --exclude-dir=.git

# Update as needed
```

**Verification:**
```bash
# No references should remain (except in node_modules, git history)
grep -r "backend/" . --exclude-dir=node_modules --exclude-dir=.git --exclude-dir=backend
grep -r "frontend/" . --exclude-dir=node_modules --exclude-dir=.git --exclude-dir=fe
```

### Pattern 4: Sevalla/DigitalOcean Deployment Update

**What:** Update deployment configuration to point to new folder structure

**When to use:** After folder rename, before pushing to main (to prevent broken deployments)

**Current deployment architecture (from 05-RESEARCH-sevalla.md):**
- **Platform:** DigitalOcean App Platform (NOT Sevalla, despite terminology in docs)
- **Backend URL:** `https://backend-dz3qa.ondigitalocean.app`
- **Backend Source Directory:** `backend/` (configured in App Platform)
- **Frontend:** To be deployed with Source Directory `frontend/`

**Required updates:**

**Backend service (via DigitalOcean App Platform UI or API):**
1. Navigate to App Platform → perspectize backend service → Settings
2. Update **Source Directory** from `backend/` → `backend/`
3. Verify **Build Command** still works (should be auto-detected)
4. Save changes

**Frontend static site (when deployed):**
1. Set **Source Directory** to `frontend/` (not `frontend/`)
2. Build Command: `pnpm run build` (unchanged)
3. Output Directory: `build` (unchanged)

**Alternative: .do/app.yaml configuration**

If App Platform is configured via YAML (not found in current repo):
```yaml
name: perspectize
services:
  - name: backend
    source_dir: backend/  # Updated from backend/
    # ... rest of config

static_sites:
  - name: frontend
    source_dir: frontend/       # Updated from frontend/
    # ... rest of config
```

**Timing consideration:** Update deployment config AFTER pushing rename to GitHub but BEFORE deployment triggers. If deployment auto-triggers on push, temporarily disable auto-deploy or expect one failed deployment.

**Verification:**
- Backend redeploys successfully from `backend/` directory
- Deployment logs show correct working directory
- Backend URL remains `https://backend-dz3qa.ondigitalocean.app` (URL doesn't change with source directory)

**Sources:**
- [DigitalOcean: Deploy from Monorepo](https://docs.digitalocean.com/products/app-platform/how-to/deploy-from-monorepo/) - Source Directory configuration

### Anti-Patterns to Avoid

**Don't rename folders before updating Go imports:** This breaks the build immediately. Go files reference old module path, but `go.mod` points to new path, causing import errors.

**Don't use repository-wide find+replace without excludes:** Will modify `node_modules/`, `.git/`, and other non-source files. Always use `--exclude-dir` flags.

**Don't forget gqlgen.yml model bindings:** These contain full import paths for enum/scalar bindings. Missed updates cause gqlgen code generation to fail.

**Don't assume GitHub redirects work for Go modules:** While git operations redirect, `go get` may not reliably follow redirects. Explicitly update import paths.

**Don't split rename into multiple PRs:** Repository rename, module path update, and folder rename should be a single atomic change. Splitting creates intermediate broken states.

**Don't forget to update deployment configs:** Pushing folder rename without updating Source Directory in App Platform breaks deployments.

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Import path refactoring | Custom AST parser | `find + sed` with regex | Simple text replacement, battle-tested, no dependencies |
| Module path updates | Manual go.mod editing | `go mod edit -module` | Official tool, validates module path format |
| Bulk file updates | Shell script loop | `find -exec sed` | Single command, atomic, standard UNIX tool |
| GitHub repo rename | API calls, git config hacks | GitHub web UI | Only supported method, handles all edge cases |
| Deployment config updates | Editing raw YAML | App Platform UI | Validates configuration, prevents YAML syntax errors |

**Key insight:** Repository restructuring is text manipulation at scale. Standard UNIX tools (find, sed, git mv) are more reliable than custom scripts or heavy tooling.

## Common Pitfalls

### Pitfall 1: Forgetting gqlgen.yml Model Bindings

**What goes wrong:** After updating Go imports, `make graphql-gen` fails with "package not found" errors for model bindings.

**Why it happens:** `gqlgen.yml` contains full import paths like `github.com/.../perspectize/backend/internal/core/domain.SortOrder`. These aren't caught by searching for `*.go` files.

**How to avoid:**
```bash
# Include gqlgen.yml in bulk update
sed -i '' 's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' \
  backend/gqlgen.yml
```

**Warning signs:**
- `go test` passes but `make graphql-gen` fails
- Error: "package github.com/.../perspectize/backend/internal/core/domain is not in GOROOT"
- Generated files (`models_gen.go`) reference old import paths

### Pitfall 2: CI/CD Cache Path Mismatches

**What goes wrong:** After folder rename, CI jobs take 5-10x longer because cache doesn't work.

**Why it happens:** GitHub Actions `cache-dependency-path` setting points to old folder:
```yaml
cache-dependency-path: backend/go.sum  # Old path, no longer exists
```

Cache lookup fails silently, job re-downloads all dependencies.

**How to avoid:** Update all `working-directory` and `cache-dependency-path` settings in `.github/workflows/*.yml` files as part of bulk sed:
```bash
sed -i '' 's/backend/backend/g' .github/workflows/ci.yml
sed -i '' 's/frontend/frontend/g' .github/workflows/frontend-test.yml
```

**Warning signs:**
- CI job runtime increases significantly
- Build logs show "Cache not found" or downloading all dependencies
- No "Cache restored from key: ..." message in logs

### Pitfall 3: Planning Docs Out of Sync

**What goes wrong:** Future work references old paths ("`backend/internal/...`"), causing confusion during implementation.

**Why it happens:** Planning docs (69 files in `.planning/`) contain hardcoded paths in architecture diagrams, file trees, and task descriptions.

**How to avoid:** Include `.planning/` directory in bulk updates:
```bash
find .planning/ -name "*.md" -type f -exec sed -i '' 's/backend/backend/g' {} +
```

**Warning signs:**
- Implementation PRs reference non-existent paths
- "File not found" errors when following planning doc instructions
- Confusion during code review about which folder structure is current

### Pitfall 4: Deployment Breaks After Push

**What goes wrong:** Pushing folder rename to `main` triggers auto-deployment, but App Platform still points to old Source Directory `backend/`. Deployment fails with "Source directory not found".

**Why it happens:** Source Directory is configured in App Platform UI/YAML, not in git. Folder rename doesn't automatically update platform config.

**How to avoid:**
1. **Option A (safer):** Disable auto-deploy temporarily, push changes, update Source Directory, re-enable auto-deploy, trigger manual deployment
2. **Option B:** Update Source Directory immediately after push (race condition, may have one failed deployment)

**Warning signs:**
- Deployment logs: "Error: Source directory 'backend' not found"
- App Platform status: "Deployment failed"
- Backend URL returns 500 or 503 errors

### Pitfall 5: Package.json Name Confusion

**What goes wrong:** Renaming `frontend/` folder to `frontend/`, developer updates `package.json` name to `"fe"`, breaking npm package conventions.

**Why it happens:** Folder name and npm package name are independent. `package.json` name is internal identifier, not tied to folder structure.

**How to avoid:** **Do NOT update `package.json` name field.** Leave as `"fe"` even after folder rename:
```json
{
  "name": "fe",  // KEEP THIS - npm package name
  "private": true,
  // ...
}
```

**Warning signs:**
- pnpm workspace resolution fails
- Package name doesn't match documentation
- Unnecessary churn in package-lock files

### Pitfall 6: Breaking Repository-Wide Search

**What goes wrong:** After rename, developers search for `backend` in codebase to find backend code, get zero results, assume feature isn't implemented.

**Why it happens:** Muscle memory + documentation that uses old names as shorthand.

**How to avoid:**
1. Update all documentation to use new names consistently
2. Add note in root README about rename (temporary, remove after team adjusts)
3. Use descriptive folder names: `backend/` is self-documenting, `backend/` required context

**Warning signs:**
- Slack messages: "Where's the Go backend code?"
- New contributors confused by folder structure
- PRs reference wrong paths in descriptions

## Execution Checklist

Ordered steps with verification at each stage:

### Stage 1: GitHub Repository Rename
- [ ] Navigate to https://github.com/CodeWarrior-debug/perspectize/settings
- [ ] Rename repository from `perspectize` → `perspectize`
- [ ] Update local remote: `git remote set-url origin https://github.com/CodeWarrior-debug/perspectize.git`
- [ ] Verify: `git fetch` succeeds
- [ ] Verify: `git remote -v` shows new URL
- [ ] Commit checkpoint: *None needed, GitHub-only operation*

### Stage 2: Go Module Path Refactoring
- [ ] Update `backend/go.mod`: `go mod edit -module github.com/CodeWarrior-debug/perspectize/backend`
- [ ] Bulk update Go imports: `find backend/ -name "*.go" -type f -exec sed -i '' 's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' {} +`
- [ ] Update gqlgen.yml: `sed -i '' 's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' backend/gqlgen.yml`
- [ ] Verify: `cd backend && go mod tidy` (no errors)
- [ ] Verify: `cd backend && go test ./...` (all tests pass)
- [ ] Verify: `cd backend && make graphql-gen` (regenerates cleanly)
- [ ] Commit: `git commit -am "refactor(go): update module path to perspectize/backend"`

### Stage 3: Folder Rename
- [ ] Rename folders: `git mv backend backend && git mv fe fe`
- [ ] Update CI workflows: `sed -i '' 's/backend/backend/g' .github/workflows/ci.yml`
- [ ] Update CI workflows: `sed -i '' 's/frontend/frontend/g' .github/workflows/frontend-test.yml`
- [ ] Update root CLAUDE.md: `sed -i '' -e 's/backend/backend/g' -e 's/frontend/frontend/g' CLAUDE.md`
- [ ] Update backend CLAUDE.md: `sed -i '' 's/backend/backend/g' backend/CLAUDE.md`
- [ ] Update frontend CLAUDE.md: `sed -i '' 's/frontend/frontend/g' frontend/CLAUDE.md`
- [ ] Update docs/: `find docs/ -name "*.md" -type f -exec sed -i '' -e 's/backend/backend/g' -e 's/frontend/frontend/g' {} +`
- [ ] Update .planning/: `find .planning/ -name "*.md" -type f -exec sed -i '' -e 's/backend/backend/g' -e 's/frontend/frontend/g' {} +`
- [ ] Update .gitignore (if needed): Check `grep "backend\|fe" .gitignore`
- [ ] Verify: `grep -r "backend/" . --exclude-dir=node_modules --exclude-dir=.git --exclude-dir=backend` (no results)
- [ ] Verify: `grep -r "frontend/" . --exclude-dir=node_modules --exclude-dir=.git --exclude-dir=fe` (no results)
- [ ] Verify: `cd backend && go test ./...` (tests still pass from new location)
- [ ] Verify: `cd fe && pnpm run build` (build succeeds from new location)
- [ ] Commit: `git commit -am "refactor: rename folders to backend/ and frontend/"`

### Stage 4: Deployment Configuration Update
- [ ] Navigate to DigitalOcean App Platform → Backend Service → Settings
- [ ] Update Source Directory: `backend/` → `backend/`
- [ ] Save configuration (may trigger auto-deployment)
- [ ] If auto-deploy disabled: Push commits to `main` → Re-enable auto-deploy → Trigger manual deployment
- [ ] Verify: Deployment succeeds from new source directory
- [ ] Verify: Backend URL `https://backend-dz3qa.ondigitalocean.app/graphql` still responds
- [ ] Document: Update deployment config in planning docs if changes made

### Stage 5: Final Verification
- [ ] CI: Push to GitHub, verify CI workflows pass
- [ ] Local dev: Clone repo fresh in temp directory, verify `make run` and `pnpm run dev` work
- [ ] Documentation: Spot-check key docs (CLAUDE.md, ARCHITECTURE.md) for path consistency
- [ ] Planning: Verify next phase plans reference correct paths
- [ ] Close: Mark phase complete in ROADMAP.md

## Code Examples

### Example: Bulk Update with Progress Logging

```bash
#!/bin/bash
# update-paths.sh - Bulk update all paths with progress logging

set -e  # Exit on error

echo "Stage 1: Updating Go module path..."
cd backend
go mod edit -module github.com/CodeWarrior-debug/perspectize/backend
echo "✓ go.mod updated"

echo "Stage 2: Updating Go imports..."
UPDATED_FILES=$(find . -name "*.go" -type f -exec sed -i '' \
  's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' {} + \
  -print | wc -l)
echo "✓ Updated $UPDATED_FILES Go files"

echo "Stage 3: Updating gqlgen.yml..."
sed -i '' 's|github.com/CodeWarrior-debug/perspectize/backend|github.com/CodeWarrior-debug/perspectize/backend|g' gqlgen.yml
echo "✓ gqlgen.yml updated"

echo "Stage 4: Verifying Go module..."
go mod tidy
go test ./... -short
echo "✓ Tests pass"

cd ..
echo "✓ All stages complete"
```

### Example: Pre-Flight Verification Script

```bash
#!/bin/bash
# verify-rename.sh - Check for remaining old paths

echo "Checking for remaining 'backend/' references..."
BACKEND_REFS=$(grep -r "backend/" . \
  --exclude-dir=node_modules \
  --exclude-dir=.git \
  --exclude-dir=backend \
  --exclude="*.md" | wc -l)

echo "Checking for remaining 'frontend/' references..."
FRONTEND_REFS=$(grep -r "frontend/" . \
  --exclude-dir=node_modules \
  --exclude-dir=.git \
  --exclude-dir=fe \
  --exclude="*.md" | wc -l)

if [ "$BACKEND_REFS" -gt 0 ] || [ "$FRONTEND_REFS" -gt 0 ]; then
  echo "❌ Found remaining references:"
  echo "  Backend: $BACKEND_REFS"
  echo "  Frontend: $FRONTEND_REFS"
  exit 1
else
  echo "✓ No remaining path references found"
fi
```

### Example: Git Remote Update (All Team Members)

```bash
# After repository rename, each team member runs:
git remote set-url origin https://github.com/CodeWarrior-debug/perspectize.git

# Verify new URL
git remote -v

# Fetch to confirm working
git fetch origin main
```

### Example: GitHub API Repository Rename (Alternative to UI)

**Note:** Repository rename is NOT supported via GitHub API or `gh` CLI. Must use web UI.

Attempting via API returns:
```
PATCH /repos/{owner}/{repo}
{
  "name": "new-name"  // This field is NOT allowed for renames
}
# Returns 422: "name cannot be changed"
```

Only supported method: Settings → Rename repository in web UI.

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| Manual import updates | gopls rename | ~2020 (Go modules era) | IDE-based refactoring for symbols, not repo paths |
| Custom scripts | `go mod edit` | Go 1.11+ (modules) | Official tool for go.mod manipulation |
| GitHub API rename | Web UI only | Always | API doesn't support repository rename |
| find + grep | ripgrep (rg) | 2016+ | Faster search, but find+sed is POSIX-standard |

**Deprecated/outdated:**
- **gorename tool:** Obsolete since Go modules. Use gopls instead.
- **Manual go.mod editing:** Error-prone. Use `go mod edit -module` for module path changes.
- **Repository rename via git config:** GitHub-side operation only, requires web UI.

## Open Questions

1. **Sevalla vs DigitalOcean terminology**
   - What we know: Backend is on DigitalOcean App Platform (`*.ondigitalocean.app` URL), but docs call it "Sevalla"
   - What's unclear: Is there a planned migration to actual Sevalla (Kinsta), or is this terminology confusion?
   - Recommendation: Proceed with DigitalOcean App Platform updates. Clarify with user if needed.

2. **Custom domain for backend**
   - What we know: Backend URL is `backend-dz3qa.ondigitalocean.app` (auto-generated subdomain)
   - What's unclear: Whether custom domain will be added (would make URL stable during renames)
   - Recommendation: Current rename doesn't affect deployed URL. Custom domain out of scope for this phase.

3. **Frontend deployment status**
   - What we know: Frontend is not yet deployed to production (Phase 5 target)
   - What's unclear: Whether to update frontend deployment config preemptively
   - Recommendation: Update references in planning docs but defer actual deployment config until Phase 5 execution.

4. **Breaking change for external forks**
   - What we know: GitHub redirects work for clones, but go get may not reliably follow redirects
   - What's unclear: Whether any external projects depend on this repo's Go modules
   - Recommendation: Repo is private (`"private": true` in package.json), so no external dependencies. Safe to proceed.

5. **.do/app.yaml existence**
   - What we know: No `.do/app.yaml` file found in repository
   - What's unclear: Whether App Platform is configured via UI only or YAML exists elsewhere
   - Recommendation: Update via UI. If YAML found during deployment phase, update it then.

## Sources

### Primary (HIGH confidence)
- [GitHub Docs: Renaming a repository](https://docs.github.com/en/repositories/creating-and-managing-repositories/renaming-a-repository) - Official GitHub documentation on rename effects and redirects
- [DigitalOcean Docs: Deploy from Monorepo](https://docs.digitalocean.com/products/app-platform/how-to/deploy-from-monorepo/) - Source Directory configuration for monorepos
- Repository grep analysis - 78 files with Go import paths, 117 occurrences of `perspectize`, confirmed via local search

### Secondary (MEDIUM confidence)
- [JetBrains Guide: Rename Go Module](https://www.jetbrains.com/guide/go/tips/rename-go-module-name/) - IDE-based refactoring approach
- [GitHub Community: How long does github forward renamed/moved repos?](https://github.com/orgs/community/discussions/22669) - Confirms redirects are indefinite unless new repo created
- [GitHub Docs Issue #15575](https://github.com/github/docs/issues/15575) - Discusses GitHub Actions breaking with renamed repos (external action references)

### Tertiary (LOW confidence)
- [Applied Go: Rename or Relocate a Public Go Module](https://appliedgo.net/spotlight/rename-or-relocate-a-public-go-module/) - Philosophy for public modules (not directly applicable, repo is private)
- [Vincent Schmalbach: How to Rename Your GitHub Project](https://www.vincentschmalbach.com/how-to-rename-your-github-project-locally-and-remote/) - Community tutorial (confirms `git remote set-url` pattern)

## Metadata

**Confidence breakdown:**
- Repository rename mechanics: HIGH - Official GitHub docs, well-documented behavior
- Go module refactoring: HIGH - Standard tooling (`go mod edit`, find+sed), verified via local analysis
- CI/CD impact: HIGH - Explicit path references found in workflow files via grep
- Deployment config: MEDIUM - Based on Phase 5 research, not actual deployed frontend config
- Sevalla/DigitalOcean: MEDIUM - URL confirms DigitalOcean, but terminology in docs suggests confusion

**Research date:** 2026-02-13
**Valid until:** 2026-03-13 (30 days) - Stable domain, unlikely to change significantly

**Limitations:**
- No access to DigitalOcean App Platform UI to verify exact current configuration
- Sevalla vs DigitalOcean terminology ambiguity in existing planning docs
- Frontend deployment config is extrapolated from backend deployment (frontend not yet deployed)
- gopls rename capabilities researched but not tested for repository-level refactoring
