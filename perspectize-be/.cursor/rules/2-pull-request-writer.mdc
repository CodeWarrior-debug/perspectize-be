---
alwaysApply: false
---
# Pull Request Description Formatter

## Overview
This rule provides a standardized template for creating well-formatted pull request descriptions that ensure consistency, clarity, and proper documentation across the codebase.

## Template Structure

### Required Elements
1. **JIRA Link** - Must be placed near the top
2. **Video/Image Placeholder** - For demonstrating functionality
3. **Summary** - Brief description of changes
4. **Problem Statement** - What issue was being solved
5. **Solution** - How the issue was resolved
6. **Technical Changes** - Detailed list of modifications
7. **Testing** - How changes were validated
8. **Impact** - Areas affected by changes

## Standard Template

```markdown
# Pull Request Title - Brief Description of Changes

## JIRA
[TICKET-NUMBER](https://iralogix.atlassian.net/browse/TICKET-NUMBER)

## Demo
üé• **Video/Screenshot**: [Placeholder - Add demonstration of functionality]

## Summary
Brief one-sentence description of what this PR accomplishes.

## Problem
Describe the issue that prompted these changes:
- What was broken or missing?
- How was it discovered?
- What was the user impact?

## Solution
Explain the approach taken to resolve the issue:
- High-level strategy
- Why this approach was chosen
- Any alternatives considered

## Technical Changes
### Files Modified
For small changes (‚â§10 files), list all files:
- `path/to/file1.ts` - Description of changes
- `path/to/file2.ts` - Description of changes
- `path/to/file3.ts` - Description of changes

For large changes (>10 files), use one of these strategies:

**Strategy 1: Group by Category**
- **Components** (12 files): Updated dashboard components for new layout
- **API Layer** (8 files): Added GraphQL queries and mutations for user preferences
- **Types** (6 files): Extended interfaces for new data structures
- **Tests** (15 files): Added comprehensive test coverage
- **Styles** (4 files): Updated CSS for responsive design

**Strategy 2: Key Files + Summary**
- `src/components/Dashboard/DashboardContainer.tsx` - Main dashboard component restructure
- `src/api/graphql/dashboard.ts` - New GraphQL schema and resolvers
- `src/types/Dashboard.ts` - Core type definitions
- `src/hooks/useDashboard.ts` - Custom hook for dashboard state
- **+ 23 additional files** - Supporting components, tests, and utilities

**Strategy 3: Directory-Based**
- `src/components/Dashboard/` - Complete dashboard component suite (8 files)
- `src/api/dashboard/` - New API layer implementation (5 files)
- `src/types/` - Extended type definitions (3 files)
- `tests/dashboard/` - Comprehensive test coverage (12 files)

### Key Changes
1. **Change Category 1**
   - Specific modification details
   - Rationale for the change

2. **Change Category 2**
   - Specific modification details
   - Rationale for the change

## Validation & Testing
- [ ] Manual testing performed
- [ ] Specific test cases covered
- [ ] Edge cases validated
- [ ] Error scenarios tested

## Impact
- **Breaking Changes**: None/List any breaking changes
- **Database Changes**: None/Describe schema modifications
- **API Changes**: None/Document API modifications
- **Dependencies**: None/List new dependencies added
```

## Example: Bug Fix
**Name**: Fix Beneficiary Percentage Validation Error

```markdown
# Fix Beneficiary Percentage Validation Error

## JIRA
[EX-636](https://iralogix.atlassian.net/browse/EX-636)

## Demo
üé• **Video/Screenshot**: [Placeholder - Add demonstration of beneficiary percentage validation working]

## Summary
Fixed GraphQL validation error preventing beneficiaries with fractional percentages and added proper validation for percentage values.

## Problem
Users were unable to save multiple beneficiaries with fractional percentage allocations (e.g., 0.5, 0.33) due to:
- üîß GraphQL schema defining percentage as `Int!` instead of `Float!`
- ‚ö†Ô∏è Missing validation for percentage bounds (0 < percentage ‚â§ 1)
- üö´ Validation errors not being properly returned to the frontend

*Note: Using SVG icons with bullet points keeps users engaged and improves visual hierarchy*

## Solution
Updated the beneficiary percentage handling to use floating-point numbers and implemented comprehensive validation:
- Changed GraphQL schema from `Int!` to `Float!`
- Added class-validator decorators for range validation
- Fixed nested validation in service layer DTOs
- Resolved data transformation issues with date fields

## Technical Changes
### Files Modified
- `apps/unified-xl/src/graphql/account-holder/account-holder.graphql` - Changed percentage type
- `apps/unified-xl/src/graphql/account-holder/entities/Account/inputs.ts` - Updated TypeScript types and validation
- `modules/services/src/services/individual/IraAccounts/dtos/IraAccounts.input.ts` - Added nested validation and date transformation
- `apps/unified-xl/src/graphql/account-holder/schema.ts` - Enabled TypeGraphQL validation
- `modules/services/src/utils/ServiceValidator.ts` - Fixed array handling bug

### Key Changes
1. **GraphQL Schema Updates**
   - Changed `percentage: Int!` to `percentage: Float!` in `BeneficiaryInputXL`
   - Updated TypeScript field from `GraphQLInt` to `GraphQLFloat`
   - Added `@IsPositive` and `@Max(1)` validation decorators

2. **Service Layer Validation**
   - Added `@Type(() => BeneficiaryInput)` and `@ValidateNested({ each: true })` to `beneficiaries` field
   - Added `@TransformToDateOnly()` decorator to fix date transformation issues
   - Enhanced error handling in `ServiceValidator.formatValidationErrors`

3. **Validation Framework**
   - Enabled `validate: true` in TypeGraphQL schema building
   - Fixed bug in `ServiceValidator` where single error objects weren't handled as arrays

## Validation & Testing
- [x] Manual testing with valid percentages (0.2, 0.5, 0.33)
- [x] Manual testing with invalid percentages (0, -0.1, 1.1, 1.5)
- [x] Verified proper error messages are returned
- [x] Tested single beneficiary (percentage: 1.0)
- [x] Tested multiple beneficiaries with fractional allocations
- [x] Confirmed date transformation works correctly

## Impact
- **Breaking Changes**: None - maintains backward compatibility
- **Database Changes**: None - no schema modifications required
- **API Changes**: GraphQL input type changed from Int to Float (non-breaking)
- **Dependencies**: None - used existing validation decorators from @irx/common
```

## Example: Feature
**Name**: User Dashboard Implementation

```markdown
# User Dashboard Implementation

## JIRA
[EX-123](https://iralogix.atlassian.net/browse/EX-123)

## Demo
üé• **Video/Screenshot**: [Placeholder - Add demonstration of new user dashboard functionality]

## Summary
Implemented comprehensive user dashboard with account overview, recent transactions, and personalized recommendations.

## Requirements
Product requirements for the new user dashboard functionality:
- üìä Quick access to account balances and performance metrics
- üìã Recent transaction history with filtering capabilities
- üí° Personalized financial recommendations based on user behavior
- üß≠ Easy navigation to key account management features
- üì± Responsive design that works across all device types

*Note: Using SVG icons with bullet points keeps users engaged and improves visual hierarchy*

## Solution
Created a new dashboard module with responsive design and real-time data:
- Built modular dashboard components using React and TypeScript
- Implemented GraphQL queries for efficient data fetching
- Added caching layer for improved performance
- Integrated with existing authentication and permission systems

## Technical Changes
### Files Modified
**Strategy 3: Directory-Based** (35+ files total)
- `apps/frontend/src/components/Dashboard/` - New dashboard component suite (12 files)
- `apps/unified-xl/src/graphql/dashboard/` - New GraphQL resolvers and schema (6 files)
- `modules/services/src/services/dashboard/` - Dashboard business logic services (4 files)
- `modules/entities/src/entities/` - New entities and updated models (3 files)
- `tests/` - Comprehensive test coverage across all layers (15+ files)

### Key Changes
1. **Frontend Components**
   - Created `DashboardContainer`, `AccountSummary`, `TransactionList`, `RecommendationPanel`
   - Implemented responsive grid layout with CSS Grid
   - Added loading states and error boundaries

2. **Backend Services**
   - New `DashboardService` for aggregating user data
   - `RecommendationEngine` for personalized suggestions
   - Caching layer using Redis for frequently accessed data

3. **GraphQL API**
   - Added `dashboard` query with nested resolvers
   - Implemented field-level permissions
   - Added subscription for real-time balance updates

## Validation & Testing
- [x] Unit tests for all dashboard components (95% coverage)
- [x] Integration tests for GraphQL resolvers
- [x] Manual testing across desktop, tablet, mobile viewports
- [x] Performance testing with large datasets (10,000+ transactions)
- [x] Accessibility testing (WCAG 2.1 AA compliance)
- [x] Cross-browser testing (Chrome, Firefox, Safari, Edge)

## Impact
- **Breaking Changes**: None
- **Database Changes**: Added `dashboard_preferences` table
- **API Changes**: New GraphQL `dashboard` query endpoint
- **Dependencies**: Added `recharts` for data visualization, `react-window` for virtualization
```

## Usage Guidelines

### When to Use This Template
- All pull requests should follow this structure
- Adapt sections based on change complexity
- Remove irrelevant sections for simple changes
- Always include JIRA link and demo placeholder

### Best Practices
1. **Be Specific**: Use concrete examples and file paths
2. **Be Concise**: Keep descriptions focused and scannable
3. **Be Complete**: Don't skip testing or impact sections
4. **Use Checkboxes**: Make testing sections actionable
5. **Link Context**: Always include JIRA ticket for traceability

### Customization Notes
- Adjust technical sections based on your changes (frontend, backend, full-stack)
- Include performance metrics for optimization PRs
- Add security considerations for auth/permissions changes
- Include migration steps for database changes
- Document rollback procedures for high-risk changes

## Output Options
When generating a pull request description, ask the user where they would like the output:

1. **Write to new file in root directory** - Create a new `.md` file in the project root
2. **Copy to clipboard** - Format and copy the description for pasting elsewhere
3. **Other, please specify** - Allow user to specify custom output location
4. **Append to current planning workflow file** - If a planning workflow file exists (`.cursor/ai-change-plans/*.md`), append to the bottom

### Output Prompt Template
```
Where would you like the pull request description output?
1. Write to new file in root directory
2. Copy to clipboard  
3. Other, please specify
4. Append to bottom of current planning workflow file (if one exists)

Please select an option (1-4):
```
